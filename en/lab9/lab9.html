<!--
Create an HTML file and structure and a JSON file. Upload both files to public_html folder of your Humber College student account.

In your HTML document, Use AJAX calls to extract your JSON file from your public_html folder.

The JSON file contains a list of items, prices and quantity.

Traverse the JSON object (using loops if necessary) and display the items properly on your HTML document. 
-->
<html>

<body>
  <h2>AJAX Example, JSON Object</h2>
  <br>
  <table id="itemTable" class="table">
    <thead>
      <tr>
        <th>price</th>
        <th>item</th>
        <th>quantity</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>1</td>
        <td>egg</td>
        <td>12</td>
      </tr>
    </tbody>
  </table>
  <br>

  <button type="button" onclick="loadJson()">
    Get JSON Info
  </button>
  <script>
      const tablesBody = document.querySelector("#itemTable > tbody");

      function loadJson() {

        const request = new XMLHttpRequest();

        request.open("get", "lab9.json");
        request.onload = () => {
          try {
            const json = JSON.parse(request.responseText);
            populateTables(json);
          } catch (e) {
            console.warn("Could not load table!");
          }
        };

        request.send();
      
    }



      function populateTables(json) {
        // CLears out existing tabLe data
        while (tablesBody.firstChild) {

          tablesBody.removeChild(tablesBody.firstChild);

        }

        // PopuLate table

        json.forEach((row) => {

          const tr = document.createElement("tr");


          row.forEach((cell) => {

            const td = document.createElement("td");

            td.textContent = cell;

            tr.appendChild(td);
          });


          tablesBody.appendChild(tr);



        });
      }
  </script>
</body>

</html>